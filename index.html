<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hope Raid Tracker</title>
  <link rel="icon" type="image/x-icon" href="assets/images/World%20of%20Warcraft%20Alliance.ico" />
  <link rel="apple-touch-icon" href="assets/images/World%20of%20Warcraft%20Alliance.PNG" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="signup-page" data-nav-page="signup">
  <section id="authGate" class="auth-gate" hidden>
    <div class="auth-gate-card">
      <h1>Hope Raid Tracker</h1>
      <p id="authGateMessage" class="auth-gate-message">Sign in with Google to continue.</p>
      <button type="button" id="authGateSignInButton">Sign in with Google</button>
    </div>
  </section>

  <main class="container" id="appShell" hidden>
    <header class="header">
      <div id="sharedNavRoot"></div>
      <!-- Hidden form for nav-component.js Save/Cancel buttons -->
      <form id="signupForm" style="display:none"></form>
      <!-- Hidden inputs required by app.js logic -->
      <input type="hidden" id="signupId" />
      <input type="hidden" id="selectedRaidId" />
    </header>

    <dialog id="profileModal" class="profile-modal profile-modal-large">
      <form id="profileModalForm" class="profile-modal-content" method="dialog">
        <div class="profile-modal-header">
          <h3 id="profileModalHeading">Create Profile</h3>
        </div>
        <div class="primary-fields">
          <label>
            Discord Name (Required)
            <input id="profileName" name="profileName" type="text" maxlength="60" required />
            <small class="help-text">Use your Discord display name to group your characters during signup.</small>
          </label>
          <label>
            Character Name (Required)
            <input id="characterName" name="characterName" type="text" maxlength="24" required />
            <small class="help-text">Must exactly match your in-game main raiding character name.</small>
          </label>
          <label>
            Class
            <select id="wowClass" name="wowClass" required>
              <option value="">Select class</option>
              <option value="Druid">Druid</option>
              <option value="Hunter">Hunter</option>
              <option value="Mage">Mage</option>
              <option value="Paladin">Paladin</option>
              <option value="Priest">Priest</option>
              <option value="Rogue">Rogue</option>
              <option value="Shaman">Shaman</option>
              <option value="Warlock">Warlock</option>
              <option value="Warrior">Warrior</option>
            </select>
          </label>


        </div>
        <div class="spec-pair">
        <fieldset class="spec-role-group">
          <legend>Main Setup</legend>
          <label>
            Main Role
            <select id="mainRole" name="mainRole" required>
              <option value="">Select role</option>
              <option value="Tank">ðŸ›¡ Tank</option>
              <option value="Healer">âœš Healer</option>
              <option value="DPS">âš” DPS</option>
            </select>
          </label>
          <label>
            Main Specialization (MS)
            <select id="mainSpecialization" name="mainSpecialization" required>
              <option value="">Select class and role first</option>
            </select>
          </label>
        </fieldset>
        <fieldset class="spec-role-group">
          <legend>Off Setup</legend>
          <label>
            Off Role
            <select id="offRole" name="offRole" required>
              <option value="">Select role</option>
              <option value="Tank">ðŸ›¡ Tank</option>
              <option value="Healer">âœš Healer</option>
              <option value="DPS">âš” DPS</option>
            </select>
          </label>
          <label>
            Off Specialization (OS)
            <select id="offSpecialization" name="offSpecialization" required>
              <option value="">Select class and role first</option>
            </select>
          </label>
        </fieldset>
        </div>
        <section class="alt-characters-section">
          <div class="alt-characters-header">
            <h4>Alt Characters</h4>
            <button type="button" id="addAltCharacterButton" class="secondary">+ Add Alt</button>
          </div>
          <div id="altCharactersContainer" class="alt-characters-list"></div>
          <small class="help-text">Add as many alts as needed. Each alt requires MS and OS setup.</small>
        </section>
        <div class="time-slots">
          <fieldset class="slot-group">
            <legend>Preferred Raiding Time 1</legend>
            <label>
              Day of Week
              <select id="preferredDay1" name="preferredDay1" required>
                <option value="">Select day</option>
                <option>Monday</option>
                <option>Tuesday</option>
                <option>Wednesday</option>
                <option>Thursday</option>
                <option>Friday</option>
                <option>Saturday</option>
                <option>Sunday</option>
              </select>
            </label>
            <div class="slot-range">
              <label>
                Start Time
                <select id="preferredStart1" name="preferredStart1" required></select>
              </label>
              <label>
                End Time
                <select id="preferredEnd1" name="preferredEnd1" required></select>
              </label>
            </div>
            <small class="help-text">Select a start and end time (12-hour format).</small>
          </fieldset>
          <fieldset class="slot-group">
            <legend>Preferred Raiding Time 2</legend>
            <label>
              Day of Week
              <select id="preferredDay2" name="preferredDay2" required>
                <option value="">Select day</option>
                <option>Monday</option>
                <option>Tuesday</option>
                <option>Wednesday</option>
                <option>Thursday</option>
                <option>Friday</option>
                <option>Saturday</option>
                <option>Sunday</option>
              </select>
            </label>
            <div class="slot-range">
              <label>
                Start Time
                <select id="preferredStart2" name="preferredStart2" required></select>
              </label>
              <label>
                End Time
                <select id="preferredEnd2" name="preferredEnd2" required></select>
              </label>
            </div>
            <small class="help-text">Select a start and end time (12-hour format).</small>
          </fieldset>
        </div>
        <div class="actions">
          <button type="button" id="saveProfileButton">Save Profile</button>
          <button type="button" id="deleteProfileButton" class="danger" hidden>Delete Profile</button>
          <button type="button" id="closeProfileModalButton" class="secondary">Close</button>
        </div>
      </form>
    </dialog>

    <section class="card" id="raidSections">
      <div id="onboardingBanner" class="onboarding-banner" hidden>
        <div class="onboarding-banner-content">
          <strong>Welcome to Hope Raid Tracker!</strong>
          <p>Before you can sign up for raids, you need to create a character profile.</p>
          <button type="button" id="onboardingCreateProfileBtn" class="onboarding-cta">Create Your Profile</button>
        </div>
      </div>
      <div class="list-header">
        <h2>Raid Schedule</h2>
        <div class="view-toggle-group">
          <button type="button" id="viewListBtn" class="view-toggle active" title="List view">â˜° List</button>
          <button type="button" id="viewCalendarBtn" class="view-toggle" title="Calendar view">ðŸ“… Calendar</button>
        </div>
      </div>

      <div id="calendarView" class="raid-calendar" hidden>
        <div class="calendar-header">
          <button type="button" id="calPrevWeek" class="calendar-nav" title="Previous month">â—€</button>
          <span id="calRangeLabel" class="calendar-range-label"></span>
          <button type="button" id="calNextWeek" class="calendar-nav" title="Next month">â–¶</button>
          <button type="button" id="calToday" class="calendar-nav calendar-today-btn" title="Jump to today">Today</button>
        </div>
        <div id="calendarGrid" class="calendar-grid"></div>
      </div>

      <div id="listView" class="raid-groups">
        <section class="raid-group upcoming-raids">
          <div class="list-header">
            <h3>Up-Coming Raids</h3>
            <span id="upcomingCountBadge" class="badge">0</span>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Character</th>
                  <th>Signup</th>
                  <th>Date</th>
                  <th>Timezone</th>
                  <th>Phase</th>
                  <th>Raid</th>
                  <th>Run Type</th>
                  <th>Size</th>
                  <th>Roster</th>
                  <th>Signups</th>
                </tr>
              </thead>
              <tbody id="upcomingRaidRows"></tbody>
            </table>
          </div>
        </section>

        <details class="raid-group past-raids past-details" open>
          <summary class="list-header">
            <h3>Past Raids <span class="past-toggle-hint">(expand / collapse)</span></h3>
            <span id="pastCountBadge" class="badge">0</span>
          </summary>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Character</th>
                  <th>Signup</th>
                  <th>Date</th>
                  <th>Timezone</th>
                  <th>Phase</th>
                  <th>Raid</th>
                  <th>Run Type</th>
                  <th>Size</th>
                  <th>Roster</th>
                  <th>Signups</th>
                </tr>
              </thead>
              <tbody id="pastRaidRows"></tbody>
            </table>
          </div>
        </details>
      </div>

      <p id="listMessage" class="message"></p>
    </section>

    <section class="xp-bar-panel" aria-label="Motivation bar">
      <div class="xp-bar-track">
        <div class="xp-bar-fill" style="width: 80%"></div>
        <span class="xp-bar-text">The Grind Don't Stop!</span>
      </div>
    </section>
  </main>

  <!-- Synchronously load config for local or production before app.js -->
  <script src="nav-component.js"></script>
  <script type="module" src="main.js"></script>
</body>
</html>
